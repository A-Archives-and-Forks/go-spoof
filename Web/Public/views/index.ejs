<h1>Welcome to <span class="highlight">GoSpoof</span></h1>
<p>This is the homepage. Navigate using the menu above or upload a honeypot log.</p>

<div class="upload-section">
  <h2>Upload <code>honeypot.log</code></h2>
  <form id="logForm" enctype="multipart/form-data">
    <input type="file" name="logFile" accept=".log" required />
    <button type="submit">Add Honeypot.log</button>
  </form>
  <p id="uploadStatus"></p>
</div>

<script>
  // File upload
  document.getElementById("logForm").addEventListener("submit", async function (e) {
    e.preventDefault();
    const form = new FormData(this);
    
    // Add CSRF token to form data
    const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content') || '';
    form.append('_csrf', csrfToken);

    const res = await fetch("/upload-log", {
      method: "POST",
      headers: {
        'X-CSRF-Token': csrfToken
      },
      body: form,
    });

    const message = await res.text();
    document.getElementById("uploadStatus").textContent = message;
  });
</script>